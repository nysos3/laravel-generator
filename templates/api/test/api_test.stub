<?php

namespace Tests;

use Illuminate\Foundation\Testing\DatabaseTransactions;

class $MODEL_NAME$ApiTest extends TestCase
{
  use AuthenticateApiTestTrait, Make$MODEL_NAME$Trait, ApiTestTrait, DatabaseTransactions;

  /**
   * @test
   */
  public function testCreate$MODEL_NAME$()
  {
    $$MODEL_NAME_CAMEL$ = $this->fake$MODEL_NAME$Data();
    $this->actingAs($this->authData())->json('POST', '$API_PREFIX_AND_VERSION$/$MODEL_NAME_PLURAL_CAMEL$', $$MODEL_NAME_CAMEL$, ['CONTENT_TYPE' => '$API_CONTENT_TYPE$']);

    $this->assertApiResponse($$MODEL_NAME_CAMEL$);
  }

  /**
   * @test
   */
  public function testRead$MODEL_NAME$()
  {
    $$MODEL_NAME_CAMEL$ = $this->make$MODEL_NAME$();
    $this->actingAs($this->authData())->json('GET', '$API_PREFIX_AND_VERSION$/$MODEL_NAME_PLURAL_CAMEL$/'.$$MODEL_NAME_CAMEL$->$PRIMARY_KEY_NAME$, ['CONTENT_TYPE' => '$API_CONTENT_TYPE$']);

    $this->assertApiResponse($$MODEL_NAME_CAMEL$->toArray());
  }

  /**
   * @test
   */
  public function testUpdate$MODEL_NAME$()
  {
    $$MODEL_NAME_CAMEL$ = $this->make$MODEL_NAME$();
    $edited$MODEL_NAME$ = $this->fake$MODEL_NAME$Data();

    $this->actingAs($this->authData())->json('PUT', '$API_PREFIX_AND_VERSION$/$MODEL_NAME_PLURAL_CAMEL$/'.$$MODEL_NAME_CAMEL$->$PRIMARY_KEY_NAME$, $edited$MODEL_NAME$, ['CONTENT_TYPE' => '$API_CONTENT_TYPE$']);

    $this->assertApiResponse($edited$MODEL_NAME$);
  }

  /**
   * @test
   */
  public function testDelete$MODEL_NAME$()
  {
    $$MODEL_NAME_CAMEL$ = $this->make$MODEL_NAME$();
    $this->actingAs($this->authData())->json('DELETE', '$API_PREFIX_AND_VERSION$/$MODEL_NAME_PLURAL_CAMEL$/'.$$MODEL_NAME_CAMEL$->$PRIMARY_KEY_NAME$, ['CONTENT_TYPE' => '$API_CONTENT_TYPE$']);

    $this->assertApiSuccess();
    $this->actingAs($this->authData())->json('GET', '$API_PREFIX_AND_VERSION$/$MODEL_NAME_PLURAL_CAMEL$/'.$$MODEL_NAME_CAMEL$->$PRIMARY_KEY_NAME$, ['CONTENT_TYPE' => '$API_CONTENT_TYPE$']);

    $this->assertResponseStatus(404);
  }
}
